{% load static %}
{% load char_filters %}

<!-- Link Swiper's CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>

<style>
    /* Стилі для посилання "Повернутись до каталогу" */
    .back-to-catalog-link {
        color: black; /* Чорний колір тексту */
        text-decoration: underline; /* Підкреслення */
        font-weight: 500;
        display: inline-block; /* Для застосування відступів */
        margin-bottom: 1.5rem; /* Відступ знизу */
        transition: color 0.3s ease;
    }

    .back-to-catalog-link:hover {
        color: #555; /* Трохи світліший колір при наведенні */
    }

    /* Scoped Swiper styles to avoid conflicts */
    .product-image .swiper {
        width: 100%;
        max-width: 560px; /* Max width for the slider */
        height: 400px;    /* You can adjust this height */
        margin-left: 0;
        margin-bottom: 0;
    }

    .product-image .swiper-slide {
        text-align: center;
        font-size: 18px;
        background: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 1px solid #eee; /* Add a light border to slides */
    }

    .product-image .swiper-slide img {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover; /* Changed to 'cover' for better image display */
    }

    .product-image .swiper-pagination-bullet {
        border-radius: inherit;
        width: 14px;
        height: 14px;
        background: #fff;
        border: 1px solid #333; /* Added border to make pagination visible */
        opacity: 0.8;
    }
    .product-image .swiper-pagination-bullet-active {
        background: #ddb85c; /* Active bullet color */
    }
</style>

<div class="memorial-product-page">
    <div class="container">
        <div>
            ＜
            <a href="javascript:history.back()" class="back-to-catalog-link">
             Wróć do katalogu
        </a>
        </div>
        <h1 class="memorial_product_page_title_h1">{{ goods.Title }}</h1>
        <!-- Верхня секція з інформацією про товар -->
        <section class="product-section">
            <!-- Колонка з зображенням -->
            <div class="product-image">
                <!-- Swiper -->
                <div class="swiper mySwiper">
                    <div class="swiper-wrapper">
                        {# Перший слайд - головне фото товару #}
                        {% if goods.img %}
                        <div class="swiper-slide">
                            <img src="{{ goods.img.url }}" alt="{{ goods.Title }}">
                        </div>
                        {% endif %}

                        {# Додаткові фото #}
                        {% for image in goods.images.all %}
                        <div class="swiper-slide">
                            <img src="{{ image.image.url }}" alt="{{ goods.Title }} - dodatkowe zdjęcie">
                        </div>
                        {% endfor %}

                        {# Placeholder slide if no images are available at all #}
                        {% if not goods.img and not goods.images.all %}
                        <div class="swiper-slide">
                           <img src="https://placehold.co/400x500/e0e0e0/333333?text=Brak+zdj%C4%99cia" alt="Brak zdjęcia">
                        </div>
                        {% endif %}
                    </div>
                    <div class="swiper-pagination"></div>
                </div>
            </div>

            <!-- Колонка з основною інформацією -->
            <div class="product-info">
                <div class="product-meta" style="margin-bottom: 0;">
                    <div class="product-size">{{ goods.Size }} cm</div>
                    <div class="product-sku">Kod: {{ goods.Product_code }}</div>
                </div>
                <div class="product-meta">
                    <div class="product-availability in-stock">{{ goods.Product_availability }}</div>
                </div>
                <div class="product-price">
                    <span class="price-uah">{{ goods.Price_in_detail_o }} </span>
                    <span class="price-eur">{{ goods.Price_in_detail_evro }}</span>
                </div>
                <a href="#background_form_f_id" class="btn btn-order">Zamówienie</a>
            </div>

            <!-- Колонка з інформацією про доставку -->
            <aside class="delivery-info delivery_info_1024">
                <div class="delivery-block">
                    <h3>
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                        </svg>
                        ODBIÓR OSOBISTY Z NASZEGO MAGAZYNU:
                    </h3>
                    <div style="display: flex; align-items: flex-start; margin-left: 10px;">
                        <img style="margin-right: 6px" src="{% static '/mysite/img/_product/svg.png' %}">
                        <p>Obwód żytomierski,<br>wieś Halinówka, ul. Centralna 2-B</p>
                    </div>
                </div>
                <div style="border: 1px solid rgb(226, 180, 59); max-width: 345px; margin: 16px 0px;"></div>
                <div class="delivery-block">
                    <h3>
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm12 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zM20 11H17V9h2.21l.79 2z"/>
                        </svg>
                        DOSTAWA NA TERENIE UKRAINY:
                    </h3>
                    <ul>
                        <li>
                            <div style="display: flex; align-items: flex-start; margin-left: 10px;">
                                <img style="margin-right: 6px" src="{% static '/mysite/img/_product/svg_1.png' %}">
                                Manipulator z rozładunkiem
                            </div>
                        </li>
                        <li>
                            <div style="display: flex; align-items: flex-start; margin-left: 10px;">
                                <img style="margin-right: 6px" src="{% static '/mysite/img/_product/svg_2.png' %}">
                                Samochód ciężarowy
                            </div>
                        </li>
                        <li>
                            <div style="display: flex; align-items: flex-start; margin-left: 10px;">
                                <img style="margin-right: 6px" src="{% static '/mysite/img/_product/svg_3.png' %}">
                                Firmy transportowe
                            </div>
                        </li>
                    </ul>
                </div>
                <div style="border: 1px solid rgb(226, 180, 59); max-width: 345px; margin: 16px 0px;"></div>
                <div class="delivery-block">
                    <h3>
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1h-2v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                        </svg>
                        DOSTAWA NA CAŁYM ŚWIECIE:
                    </h3>
                    <ul>
                        <li>
                            <div style="display: flex; align-items: flex-start; margin-left: 10px;">
                                <img style="margin-right: 6px" src="{% static '/mysite/img/_product/svg_3.png' %}">
                                Firmy transportowe
                            </div>
                        </li>
                    </ul>
                </div>
                <div style="border: 1px solid rgb(226, 180, 59); max-width: 345px; margin: 16px 0px;"></div>
                <a href="#background_form_f_id" class="btn btn-help">Pomoc w wyborze</a>
            </aside>
        </section>

        <!-- Нижня секція з характеристиками та описом -->
        <section class="details-section">
            <!-- Колонка характеристик -->
            <div class="characteristics-block">
                <h2>Specyfikacja</h2>
                <ul class="characteristics-list">
                    {% for char in goods.Characteristics|parse_characteristics %}
                        <li>
                            <span class="char-title">{{ char.title }}</span>
                            <span class="char-value">{{ char.value }}</span>
                        </li>
                    {% endfor %}
                </ul>
            </div>

            <!-- Колонка опису -->
            <div class="description-block">
                <h2>Opis</h2>
                <p>
                    {{ goods.Description|safe }}
                </p>
            </div>
            <aside class="delivery-info delivery_info_mob">
                 <!-- ... ваш код для мобільного блоку доставки, перекладений на польську ... -->
            </aside>
        </section>
    </div>
</div>
<div class="custom-cta-section">
    <div class="info-box">
        <p>Jesteśmy gotowi wykonać wyroby z granitu według Państwa indywidualnych wymiarów.<br>Państwa pomysł staje się podstawą naszego rozwiązania.</p>
    </div>
    <a class="cta-button" href="#background_form_f_id">Zostaw zapytanie</a>
</div>
{% include 'element/Feedback_form.html' %}

<!-- Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<!-- Initialize Swiper -->
<script>
  var swiper = new Swiper(".mySwiper", {
    direction: "vertical",
    slidesPerView: 1,
    spaceBetween: 30,
    mousewheel: true,
    pagination: {
      el: ".swiper-pagination",
      clickable: true,
    },
  });
</script>
