{% load static %}
<section class="video-block_index">
    <div class="video-overlay">
        <video class="hero-video" autoplay muted loop playsinline webkit-playsinline preload="metadata" poster="{% static 'mysite/img/content/main/logo.png' %}">
            <source src="{% static 'mysite/img/content/video/v1.mp4' %}" type="video/mp4">
            Twoja przeglądarka nie obsługuje tagu wideo.
        </video>
        <div class="video-content">
            <h2 class="video-title">GARANT - BUD</h2>
            <p class="video-description" style="margin-bottom: 30px">Na zakończenie informujemy, że GARANT-BUDjest
                wyłącznym partnerem oraz oficjalnym przedstawicielem firmy IMPEX GRANIT, która od ponad 18 lat
                specjalizuje się w produkcji wyrobów z granitu pochodzącego z ukraińskich złóż. Bezpośrednia współpraca
                z producentem pozwala nam zapewnić stałą dostępność materiałów, powtarzalną jakość wyrobów oraz
                konkurencyjne warunki handlowe.</p>
        </div>
    </div>
</section>
<script>
    (function () {
        var video = document.querySelector('.video-block_index .hero-video');
        var overlay = document.querySelector('.video-block_index .video-overlay');

        if (!video || !overlay) {
            return;
        }

        function setFallbackState() {
            overlay.classList.add('video-fallback');
            video.pause();
            video.removeAttribute('autoplay');
        }

        var playPromise = video.play();

        if (playPromise && typeof playPromise.then === 'function') {
            playPromise.then(function () {
                overlay.classList.remove('video-fallback');
            }).catch(function () {
                setFallbackState();
            });
        }

        video.addEventListener('error', setFallbackState);
    })();
</script>
