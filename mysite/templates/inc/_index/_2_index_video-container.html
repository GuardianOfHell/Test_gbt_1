{% load static %}
<section class="video-block_index">
    <div class="video-overlay">
        <video class="hero-video" autoplay muted loop playsinline webkit-playsinline preload="metadata" poster="{% static 'mysite/img/content/main/logo.png' %}">
            <source src="{% static 'mysite/img/content/video/v1.mp4' %}" type="video/mp4">
            Ваш браузер не підтримує тег відео.
        </video>
        <div class="video-content">
            <h2 class="video-title">GARANT - BUD</h2>
            <p class="video-description" style="margin-bottom: 30px">Компанія GARANT - BUD зареєстрована та успішно
                працює в Польщі з 2017 року. Ми спеціалізуємося на будівництві приватних будинків, продажі виробів із
                граніту як зі складу, так і на замовлення, благоустрої територій із використанням натурального каменю,
                а також на виробництві й монтажі металевих конструкцій.</p>
            <p class="video-description">GARANT - BUD є ексклюзивним партнером і офіційним представником компанії IMPEX
                GRANIT, яка понад 18 років займається виробництвом виробів із граніту з українських родовищ. Наш досвід
                у будівництві, поєднаний із високою кваліфікацією партнерів, робить нас надійним і компетентним
                постачальником будівельних рішень.</p>
        </div>
    </div>
</section>
<script>
    (function () {
        var video = document.querySelector('.video-block_index .hero-video');
        var overlay = document.querySelector('.video-block_index .video-overlay');

        if (!video || !overlay) {
            return;
        }

        function setFallbackState() {
            overlay.classList.add('video-fallback');
            video.pause();
            video.removeAttribute('autoplay');
        }

        var playPromise = video.play();

        if (playPromise && typeof playPromise.then === 'function') {
            playPromise.then(function () {
                overlay.classList.remove('video-fallback');
            }).catch(function () {
                setFallbackState();
            });
        }

        video.addEventListener('error', setFallbackState);
    })();
</script>
